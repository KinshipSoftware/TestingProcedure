# test cases exported from test plan file AAI.xml on 2013-02-25 (16:24).

IDPTest1
  SelectIDP "From the imdi browser (http://lux17.mpi.nl/ds/imdi_browser/) right click on a node and select \"manage access rights\". This will open a window requesting the selection of an identity provider."
  ArchiveLogin "Choose the MPI Archive Default Identity Provider (i.e. MPI Nijmegen button) which will bring up the Shibboleth Login page."
  LoginShibboleth "Fill in the requested MPI username and password and press the \"Login\" button. The AMS page should shown."

ExternalIDPTest
  SelectExtIDP "Having ensured complete logout, return to the imdi browser, right click on a node and select manage access rights as before. Instead of MPI, choose the link for external identity providers, which reads: \"Click here to show more identity providers\""
  ClarinLogin "From the list of external IDPs, select Clarin and enter the appropriate email address and password. (Note: testers who don't yet have a Clarin account can get one here: http://www.clarin.eu/user/register)"
  AMS "Logging in via Clarin will lead you to the welcome to AMS page. An error message will appear (\"Cannot get value for expression\") if you have not already registered your Clarin account with AMS. Before doing anything else, take note of the user name visible at the top right of screen (i.e. This.Part@mpi.nl).  "
  CreateInAMS "To get rid of the error message you will need to logout fully and log back in with MPI id (see ยง1, 1-3 above) in order to create an account inside AMS. Once logged in, select the \"User Management\" option followed by \"Create New User\" from the drop down menu that appears. This will allow you to create a new account, make sure that the user name (UID) corresponds with the user name generated when logged into the Clarin account. This is necessary for AMS to connect this new account with the Clarin login. Press save (bottom of page). "
  AMS2 "Once the AMS account has been created, log out of lux17 and close browser (or clear cache). Return to lux17 and log in again via Clarin, this time no error should appear."

ExternalIDPTest2
  SelectExtIDP2 "Having ensured complete logout, return to the imdi browser, right click on a node and select manage access rights as before. Instead of MPI, choose the link for external identity providers, which reads: \"Click here to show more identity providers\""
  SurfLogin "From the list of external IDPs, select Radboud University and input your student username and password. "
  AMS "Logging in via Radboud will lead you to the welcome to AMS page. An error message will appear as before if you have not already registered your Radboud account with AMS. To overcome this you will need to create an account inside AMS, but first take note of the user name visible at top right of page (e.g. User.Name@mpi.nl).."
  CreateInAMS "To create a new account in AMS you will need to logout fully and log back in with MPI id (see ยง1, 1-3 above). Once logged in, select the \"User Management\" option followed by \"Create New User\" from the drop down menu that appears. This will allow you to create a new account, make sure that the user name (UID) corresponds with the user name generated in the last step (it will be your student number). This is necessary for AMS to connect this new account with the Surf login. Press save (bottom of page). "
  AMS2 "Once the new AMS account has been saved, logout of lux17 and close the browser (or clear cache). Return to lux17 and login again via Radboud University, this time no error message should appear. Logout fully."

RulesForExternalUsers
  AMSLogIn "Select a node which you have rights for and click manage access rights, e.g. MPI Corpora > Demo > Dobes Training. Log in with your MPI username and password. "
  CreateRule "Select the Clarin user you created earlier in the dropdown menu, then beneath that select \"View\" to edit the existing privileges. Select edit, then scroll down to where you can apply rules and specify their type. Apply all the rules and specify \"deny\" for a few file types. Save. Now, be sure to remember to which file types access is denied and allowed for the new Clarin user."
  CreateRule2 "Repeat the above operation, but this time select the Radboud user name, which was previously added, from the dropdown menu. Apply rules and remember types accordingly. Ensure you are logged out completely (close browser/delete cookies upon log out). "
  TestClarinRules "Select the Dobes Training > Group 1 and try to view one of the session nodes. You will be prompted to log in. Do so via Clarin. Once logged in check your access status to those files you allowed and denied previously. The Clarin identity should be restricted in its access to those file types that were denied, but not to those that were allowed. Log out fully. "
  TestSurfRules "Select the Dobes Training > Group 1 and try to view one of the session nodes. You will be prompted to log in. Do so via Radbopud University. Once logged in check your access status to those files you allowed and denied previously. The Radboud University identity should be restricted in its access to those file types that were denied, but not to those that were allowed. Log out fully."

ResourceRequestSystem
  ResourceRequestSystem1 "Select a node which you have rights for and click request resource access. if you are not logged in you will be redirected to a pege in which it is asked you to log in or to register for a new account."
  ResourceRequestSystem2 "Log in with your MPI account. Choose the MPI Archive Default Identity Provider (i.e. MPI Nijmegen button) which will bring up the Shibboleth Login page. Onve you are logged in, you will be redirected to a page in which you are asked to fill in the aim of the usage of the resource."
  ResourceRequestSystem3 "Log out, select the same node and click again on request resource access. This time log in with your clarin account."
  ResourceRequestSystem4 "Log out, select the same node and click again on request resource access. Log in with your RU account."

LANA
