# AMS testcases made on the 3th of November 2011
# The version used by Arbil is then accessible under http://www.mpi.nl/world/data/3439243/
# Force Export is not possible because doing a recrawl doesn't upset the rules anymore..
# Effictive user privileges is broken so cannot incorporate that just yet, also still busy with add edit licenses

StartingLamusTest
	OpenLamus "From the imdi browser (http://lux17.mpi.nl/ds/imdi_browser/) right click on the node (I use http://lux17.mpi.nl/ds/imdi_browser/?openpath=MPI1650240%23) you want to edit and select set access rights. The 'Select an identity provider'-window should now be visible. "
	LoginFederation "Pick Damlr Federation from the Federation List. Select MPI Nijmegen from the Institution List. Press Select. The Shibboleth login page should now show up."
	LoginShibboleth "Fill in your username and password and press Login. The AMS page should be shown."

CheckLicensesTest
	LicensesCheck "All the licenses of the selected node and all the parent nodes should be visible."
	LicensesCheck2 "Click on 'Manage Node Licenses'. 'Node-Licenses Assignment' is shown. Check to see if under Assigned Licenses the same licenses are checked, as where active on the previous page."
	ViewLicenses "Next to the License names is a View Link. Click on all these links and see if information on the license is shown."
	CancelManage "Click on Cancel. The previous page should show up."

ChangingLicensesTest
	ChangeLicenses "Click on 'Manage Node Licenses', check all the licenses that aren't checked. Deselect all the licenses that were checked. Click Save, a message explaining that it may take up to 2 hours will pop up."
	CheckLicenses "Wait for a bit. Check if the licenses did change in the Imdi Browser and by selecting 'set access rights'."
	RemoveLicenses "Back in 'Manage Node Licenses; uncheck all the licenses and click on Save. The 2 hour wait time message appears."
	CheckRemovalLicenses "Wait for a bit. Check that there are no licenses anymore."
	ChangeLicensesBack "Hope you still remember the way things were because we're changing the licenses back to what they were. Select the licenses that were selected, deselect the rest. Click on save. The 2 hour message will pop up again."
	CheckInitialLicenses "Wait for a bit. Check that the licenses succesfully changed back."

AddRulesTest
	AddRule "Click on 'Add new Rules'. Node Authorization Management-window should be shown."
	AddRegUserRule "Select 'REGISTERED USERs' as your selection, under rules select everything."
	CheckRule "Wait a while. Check if the changes have been made, so logoff and check if you can acces the underlying files. You might have to remove licenses and/or previous rules that conflict. (e.g. rules that apply to EVERYBODY)"
	RemoveRule "Click on 'Edit' next too 'REGISTERED USERs'. Deselect all the checked Rules and click on 'Save'."
	CheckRemove "Wait for a while, check to see if the changes have occured."

AddNewGroupTest
	NewGroup "Under 'User Management' select 'Create New Group', LAT Group should be shown."
	AddGroup "Fill in the ID and Name and click Save. A green message like: Group "AMSTesting" has been saved. should show up."

EditGroupTest
	SelectGroup "Under 'User Management' select 'Edit Group', LAT User & Groups should be visible."
	EditGroup "Find the group (search for it) that you just created and click on its name. The groups information should be visible."
	ChangeGroupData "Change the Name, ID and possible the Hosting Institution. Subsequently add yourself to the group. Click on Save. Group 'GROUPNAME' has been saved should appear in green."
	ReverseChanges "Go to Edit Group again, find the same group and revert the changes you've just made. The same message should be shown."

AddNewUserTest
	NewUser "Under 'User Management' click on 'Create New User', the LAT User window should appear."
	FillIn "Fill in all the necessary (yellow) fields, click on Save. User 'USER' has been saved will appear in green."
	AddGroup "Go to Edit User and find the user you've just created. Fill in the passwords and add the user to your previously created test group. Click on Save again, the message in green will appear again."

EditUserTest
	SelectEditUser "In the 'User Management'-menu select 'Edit User'. LAT User & Groups should now be shown."
	PickUser "From first name select the first letter or alternatively select the first letter of the Last Name. Or if you're really clever type part of the name into the search box. Click on the user you want to edit. The LAT User page should show up."
	ChangeFields "Change all the fields, remove the user from the fields it's in now and add new ones. Click on Save, a green message should appear indicating that the user has been saved."
	RevertChanges "Change everything back and Save, check to see if the green message roars it's greenish head again."

DeleteUserTest
	SelectEditUser "In the 'User Management'-menu select 'Edit User'. LAT User & Groups should now be shown."
	PickUser "Click on the user you want to remove. The LAT User page should show up."
	ChangeFields "Click on Delete, a green message should appear indicating that the user has been deleted."

OverViewTest
	OverviewClick "Under 'Node Authorization' click on Overview. Node Authorization Overview should be shown."

EffictiveUserPrivilegesTest
	DoesntWork "Contemplate the meaning of life and everything.. .. .. Did it work?"

EditNodeRulesTest
	SelectEditNode "Under 'Node Authorization' click on Edit Node Rules. Node Authorization Management should be shown."

Node-LicenseAssignmentTest
	SelectNodeLicenseAssignment "Under 'Node Authorization' click on Node-Licenses Assignment. Node-Licenses Assignment should be shown."

LicensesRequiredTest
	SelectLicensesRequired "Under 'Node Authorization' click on Node-Licenses Assignment. Required Licenses Page should be shown."
	AddLicenses "If you haven't done so before you can accept licenses from this page, but you cannot (!) revert them back. Try adding some (with a test account)."

AddEditLicenseTest
	AddEditLicenses "Under 'Node Authorization' click on Add/Edit a License. Licenses management page should be shown."
	ViewLicenses "Next to the License names is a View Link. Click on all these links and see if information on the license is being shown."

MyUserAccountTest
	SelectUserAccount "In the 'My Account'-menu select 'My User Account'. LAT User should now be shown."
	UserCheck "If there is an orange message saying you cannot modify his data, then make a new test user to test this feature. Login as this user and try again."
	ChangeFields "Change all the fields, remove the user from the fields it's in now and add new ones. Click on Save, a green message should appear indicating that the user has been saved."
	RevertChanges "Change everything back and Save, check to see if the green message roars it's greenish head again."

MyAcceptedLicensesTest
	SelectLicensesInfo "In the 'My Account'-menu select 'My Accepted Licenses'. My Accepted Licenses should now be shown."
	LicensesCheck "All the licenses you have accepted should be visible."
	ViewLicenses "Next to the License names is a View Link. Click on all these links and see if information on the license is shown."

HelpMenu
	MenuOpen "Hover your cursor on the '?' sign. The menu should unfold. You should be able to read the current version number."
	ManualOpen "Click on 'Manual & Help', a new window should open in your browser containing all the documentation on AMS."