# test cases exported from test plan file AMS_2012_04_11.xml on 2013-07-30 (16:08).

StartingAMSTest
  OpenLamus "From the imdi browser (http://lux17.mpi.nl/ds/imdi_browser/) right click on the node (I use http://lux17.mpi.nl/ds/imdi_browser/?openpath=MPI1650240%23) you want to edit and select manage access rights. The 'Select an identity provider'-window should now be visible. "
  LoginFederation "Pick Damlr Federation from the Federation List. Select MPI Nijmegen from the Institution List. Press Select. The Shibboleth login page should now show up."
  LoginShibboleth "Fill in your username and password and press Login. The AMS page should be shown."

CheckLicensesTest
  LicensesCheck "All the licenses of the selected node and all the parent nodes should be visible (on the home page that is)."
  LicensesCheck2 "Click on 'Manage access rights'. 'Node-Licenses Assignment' is shown. Check to see if under Assigned Licenses the same licenses are checked, as were active on the previous page."
  ViewLicenses "Next to the License names is a View link. Click on all these links and see if information on the license is shown."
  CancelManage "Click on Cancel. The previous page should show up."

AddingLicensesTest
  CheckLicenses "Wait for a bit. Check if the licenses did change in the Imdi Browser and by selecting 'set access rights'."
  SelectNodeLicenseAssignment "Instead of clicking on 'Manage Node Licenses', click under 'Node Authorization' on Node-Licenses Assignment. Node-Licenses Assignment should be shown."
  RemoveLicenses "Back in 'Manage Node Licenses; uncheck all the licenses and click on Save. The 2 hour wait time message appears."
  CheckRemovalLicenses "Wait for a bit. Check that there are no licenses anymore."
  ChangeLicensesBack "Hope you still remember the way things were because we're changing the licenses back to what they were. Select the licenses that were selected, deselect the rest. Click on save. The 2 hour message will pop up again."
  CheckInitialLicenses "Wait for a bit. Check that the licenses succesfully changed back."

AddRulesTest
  AddRule "Click on 'Edit node Rules'. Node Authorization Management-window should be shown."
  AddRegUserRule "Select 'REGISTERED USERs' as your selection, when then asked to specify rules, select everything. Save."
  CheckRule "Wait a while. Check if the changes have been made, so logoff and check if you can acces the underlying files. You might have to remove licenses and/or previous rules that conflict. (e.g. rules that apply to EVERYBODY)"
  SelectEditNode "Under 'Node Authorization' click on Edit Node Rules. Node Authorization Management should be shown."
  RemoveRule "Click on 'Edit' next to 'REGISTERED USERs'. Deselect all the checked Rules and click on 'Save'."
  CheckRemove "Wait for a while, check to see if the changes have occured."
  ForbiddenAccess1 "Go to Node Authorization > Overview. You get a full overview of the existing rules for the current node. Click on \"Add new Rules\" and select \"Everybody\". \"Everybody\" appears in the drop down menu."
  ForbiddenAccess2 "Scroll down. Note that a new rule appears when \"Everybody\" is selected: \"Forbidden Access\". Select all the rules except for this one. Save. Log out, wait a bit and check if you can access the files when not being logged in."
  ForbiddenAccess3 "Go back and log in again. This time, deselect all the rules that you have previously selected and check \"Forbidden Access\". Save."
  ForbiddenAccess4 "Log out again. You cannot access the nodes anymore."

AddNewGroupTest
  NewGroup "Under 'User Management' select 'Create New Group', LAT Group should be shown."
  AddGroup "Fill in the ID and Name and click Save. A green message like: Group 'AMSTesting' has been saved. should show up."

EditGroupTest
  SelectGroup "Under 'User Management' select 'Edit Group', LAT User and Groups should be visible."
  EditGroup "Find the group (search for it) that you just created and click on its name. The groups information should be visible."
  ChangeGroupData "Change the Name of the group. Subsequently add yourself to the group. Click on Save. Group 'GROUPNAME' has been saved should appear in green."
  ReverseChanges "Go to Edit Group again, find the same group and revert the changes you've just made. The same message should be shown."

AddNewUserTest
  NewUser "Under 'User Management' click on 'Create New User', the LAT User window should appear."
  FillIn "Fill in all the necessary (yellow) fields, click on Save. User 'USER' has been saved will appear in green."
  Logout "Click on logout, in the topright corner and restart your browser"
  WAIT "!!!!!!!!!!!  After creating the new user, you must wait a day in order to be able to log in. !!!!!!!!!"
  CheckRules "Login (in the IMDI browser) as the user you've given access to pictures and check if you can access them."
  AddGroup "Login as yourself in AMS again. Go to Edit User and find the user you've just created. Fill in the passwords and add the user to your previously created test group. Click on Save again, the message in green will appear again."
  NewDomainEditorIntro "Click on 'Add new rules'. Scroll down, you can see domain editor and domain manager under assign roles."
  NewDomainEditor "Fill in all the necessary fields again but this time you will make an account for a domain editor, so change the name accordingly. Click on Save. The green message should appear again."
  NewDomainManager "Fill in all the necessary fields again but this time you will make an account for a domain manager, so change the name accordingly. Click on Save. The green message should appear again."

DomainEditorTest
  DomainEditorRights "Under 'Node Authorization' click on 'Edit Node Rules'. Under Rule Settings, select the Domain Editor user you've just created and under Assign Roles click on Domain Editor. Then Save."
  CheckInLamus "Go to http://lux17.mpi.nl/jkc/lamus/ and login with the just created domain editor account."
  CreateWorkspace "Click on 'Create New Workspace', navigate to the AMS test corpus (MPI corpora -> Demo -> Ams Demo -> AMS Testing). Right click on AMS Testing and click on 'select this node as top node for a new workspace'."
  DeleteWorkspace "If the previous step worked than you have successfully made a new domain editor. So click on 'Delete Workspace', 'delete' and then 'Main Page'. Click on logout. Restart your browser."

DomainManagerTest
  DomainManagerRights "Under 'Node Authorization' click on 'Edit Node Rules'. Under Rule Settings, select the Domain Manager user you've just created and under Assign Roles click on Domain Manager. Then Save."
  Logout "Click in the topright on 'logout'. Restart your browser."
  LoginDomainManager "Login as the domain manager that you've created"
  CreateUser "Under 'User Management' click on 'Create New User'."
  FillIn "Fill in all the necessary (yellow) fields, click on Save. User 'USER' has been saved will appear in green."
  AddRules "Under 'Node Authorization' click on 'Edit Node Rules'. Under Rule Settings select the user you've just created, and give the user rights to read image files. Click on save. A message will pop up that it might take ages.."
  Logout "Click on logout, in the topright corner and restart your browser"
  CheckRules "Login (in the IMDI browser) as the user you've given access to pictures and check if you can access them."
  EditUser "Under 'User Management' click on 'Edit User'. LAT User and Groups should now be shown."
  PickUser "Click on the user you want to remove. The LAT User page should show up."
  DeleteUser "Click on Delete, a green message should appear indicating that the user has been deleted."

EditUserTest
  SelectEditUser "In the 'User Management'-menu select 'Edit User'. LAT User and Groups should now be shown."
  PickUser "From first name select the first letter or alternatively select the first letter of the Last Name. Or if you're really clever type part of the name into the search box. Click on the user you want to edit. The LAT User page should show up."
  ChangeFields "Change all the fields, remove the user from the fields it's in now and add new ones. Click on Save, a green message should appear indicating that the user has been saved."
  RevertChanges "Change everything back and Save, check to see if the green message roars it's greenish head again."

DeleteUserTest
  SelectEditUser "In the 'User Management'-menu select 'Edit User'. LAT User and Groups should now be shown."
  PickUser "Click on the user you want to remove. The LAT User page should show up."
  DeleteUser "Click on Delete, a green message should appear indicating that the user has been deleted."

OverViewTest
  OverviewClick "Under 'Node Authorization' click on Overview. Node Authorization Overview should be shown."

EffectiveUserPrivilegesTest
  DoesntWork "Contemplate the meaning of life and everything.. .. .. Did it work?"

LicensesRequiredTest
  SelectLicensesRequired "Under 'Node Authorization' click on Licenses Required. Required Licenses Page should be shown."
  AddLicenses "If you haven't done so before you can accept licenses from this page, but you CANNOT revert them back. Try adding some (with a test account)."

AddEditLicenseTest
  AddEditLicenses "Under 'Node Authorization' click on 'Node-License Assignment'. Licenses management page should be shown."
  ViewLicenses "Next to the License names is a View Link. Click on all these links and see if information on the license is being shown."
  AddLicense "Doesn't work at the moment.."
  EditLicense "Click on Edit license next to ams2_test_license, and change the name and pick a html file to replace the license with. Click on Add/Edit a license. The license should be renamed and replaced."

MyUserAccountTest
  SelectUserAccount "In the 'My Account'-menu select 'My User Account'. LAT User should now be shown."
  UserCheck "If there is an orange message saying you cannot modify his data, then make a new test user to test this feature. Login as this user and try again."
  ChangeFields "Change all the fields, remove the user from the fields it's in now and add new ones. Click on Save, a green message should appear indicating that the user has been saved."
  RevertChanges "Change everything back and Save, check to see if the green message roars it's greenish head again."

MyAcceptedLicensesTest
  SelectLicensesInfo "In the 'My Account'-menu select 'My Accepted Licenses'. My Accepted Licenses should now be shown."
  LicensesCheck "All the licenses you have accepted should be visible."
  ViewLicenses "Next to the License names is a View Link. Click on all these links and see if information on the license is shown."

HelpMenu
  MenuOpen "Hover your cursor on the '?' sign. The menu should unfold. You should be able to read the current version number."
  ManualOpen "Click on 'Manual and Help', a new window should open in your browser containing all the documentation on AMS."
